<!DOCTYPE html>
<html lang="en" ng-app="app">
    <head>
        <meta charset="utf-8">
        <title>user directives</title>
    </head>
    <body>
        <author-names></author-names>
                
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
        <script>
            'use strict';            
            var app = angular.module('app', []);
            app.directive('authorNames', function($compile){
                return {
                    restrict: 'E',
                    controller: function($scope){
                        $scope.people = [
                            { firstName: 'Bill', lastName: 'Clinton' },
                            { firstName: 'Barrack', lastName: 'Obama' }
                        ];
                    },
                    link: function(scope, element, attrs, controller, transclue){
                        var template = scope.people.map(function(p){
                            return '<div>' + p.firstName + ' ' + p.lastName + '</div>';
                        }).join('<!---->');
                        var newElement = $compile(template)(scope);
                        element.replaceWith(newElement);
                    }
                };
            });
        </script>
    </body>
</html>